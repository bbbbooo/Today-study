# Servlet

---

> - 웹 페이지를 만들때 사용되는 자바 기반의 프로그래밍 기술
> - 웹을 만들때는 다양한 요청(request)와 응답(response)가 존재하는데 이 요청과 응답을 메소드 호출을 통해 효율적으로 처리하기 위한 기술


## 서블릿 컨테이너

> - 서블릿을 담고 관리하는 컨테이너
> - 서블릿 컨테이너 내 구현되어있는 클래스의 규칙에 맞게 관리해준다.
> - 요청을 보내면 HttpServletReqeust, HttpServletResponse 두 객체를 생성하여 get,post 각각의 메소드에 맞추어 페이지를 생성 후 응답한다.

<br>

> ### HttpServletRequest
> http 프로토콜의 request 정보를 얻기 위한 객체로 헤더정보, 파라미터, 쿠키, url 등의 정보를 읽어들이는 메소드와 body, stream을 메소드를 갖고 있음
><br>
> ### HttpServletResponse
> http 프로토콜의 response 정보를 얻기 위한 객체로 이 객체를 활용하여 contentTpye, 응답코드, 응답 메세지등을 전송한다.

<br>

## 서블릿의 생명주기
> 클라이언트가 Servlet에 요청(request)를 보내면 Servlet은 바로 호출이 되지 않는다.   
> Servlet은 객체를 생성하고 초기화 작업을 거치고 응답을 하는 과정을 거친다.

1. 클라이언트가 요청을 하면 Servlet 객체가 생성된다.
2. 서버는 `Init()`을 호출하여 Servlet 객체를 초기화한다. `Init()`메소드는 단 한번만 호출된다.
3. `Service() 메소드`가 존재하면 Http 메소드를 참고하여 `doGet()`을 호출할지 `doPost()`를 호출할지 결정후 응답을 한다.
4. 응답을 처리하면 `destroy()`를 호출하여 `ServeltRequest`, `ServletResponse` 객체를 소멸시킨다.


<br>


### get
- 페이지를 요청!!!
- ex) 단순 자료 조회


### post 
- 페이지의 정보를 전달
- ex) 회원가입, 로그인, 수정, 삭제...


<br>

---

### 쿠키
    - 인터넷을 사용하는 유저가 어떤 웹사이트를 방문했을 때 그 사이트가 사용하는 서버를 통해 로컬에 저장되는 작은 데이터
    - http는 리소스를 아끼기 위해서 클라이언트와 서버가 연결되지 않는 특징(비연결성)이 있다.또한 비용을 줄이기 위해서 서버는 클라이언트의 상태를 가지고 있지 않고 클라이언트가 요청 시에 모든 정보를 담아 보낸다.(무상태)
    - 위 HTTP의 특징 때문에 사용자의 정보를 저장할 수 없기 때문에 웹사이트는 사용자를 구별할 수 없고 사용자는 매번 번거로운 인증 절차를 진행해야 했었다.
    - 쿠키는 간단한 사용자의 정보를 기억할 수 있는 수단이며 이것은 HTTP의 단점을 해결할 수 있다.

### 세션
    - 쿠키는 정보가 안전하지 않기 때문에 서버에 저장할 용도로 사용하는 것
    - 키 값을 쿠키 형태로 할당하여 쿠키 정보를 통해 사용자를 판단할 수 있음

### 파싱
    - 문자열을 의미 있는 토큰으로 분리하고 그것들로 이루어진 parse tree를 만듦

---
<br>

# 포워드와 리다이렉트

### 포워드
    - 값을 유지한 상태로 정보를 보내는 것
    - request와 response를 유지한채로 보내기때문에 재요청시 중복요청이 들어올 수 있음
    - 변경의 주체는 서버이다. url 주소가 빠귀지 않고 서버 내부 동작만으로도 클라이언트에 응답할 수 있음
    - ex) 페이지 새로고침, 목록 조회, 목록 검색

<br>

### 리다이렉트
    - 값을 초기화한 상태로 새로운 정보를 보내는 것
    - request와 response를 초기화시키고 새로운 request와 response를 생성함
    - 새로운 url로 매핑하는 것
    - 변경의 주체가 클라이언트이다. 클라이언트가 주체일 경우 url을 직접 접속하는게 아니면 응답할 방법이 없음.
    - ex) 페이지 이동

